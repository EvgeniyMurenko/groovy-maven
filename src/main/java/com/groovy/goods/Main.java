package com.groovy.goods;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.common.collect.Maps;
import org.apache.commons.lang3.StringUtils;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.client.RestClientException;
import org.springframework.web.client.RestTemplate;
import org.springframework.web.util.UriComponentsBuilder;

import java.io.IOException;
import java.net.URI;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;


public class Main {

    private static final String HOST = "https://foxtrot.jbs.com.ua";

    public static void main(String[] args) throws IOException {

        Map<String, String> payloadAuth = Maps.newHashMap();
        payloadAuth.put("grant_type", "password");
        payloadAuth.put("password", "DVORNIK");
        payloadAuth.put("username", "DVORNIK");

        Authorization authorization = fromString(post("auth/login", "", payloadAuth, ""), Authorization.class);
        if (authorization == null) return;

        List<MyObj.Goods> goodsList = getGoods();
        List<Product> products = new ArrayList<>();
        for (MyObj.Goods goods : goodsList) {
            String pathInternet = String.format("api/products/%d/internet-price", goods.getId());
            Price internetPrice = fromString(get(pathInternet, "", authorization.getAccessToken()), Price.class); //89999

            if (internetPrice != null && internetPrice.getPrice() == null) continue;

            Product product = new Product();
            product.setId(goods.getId());
            product.setPrice(internetPrice.getPrice());
            product.setRealPrice(internetPrice.getPrice());
            product.setQty(1);
            product.setActionId(null);
            product.setBonus(null);

            Map<String, Object> payload = Maps.newHashMap();
            payload.put("firstPay", 0);
            payload.put("source", "CALL_CENTER");
            payload.put("products", List.of(product));

            CreditResult[] graceResult = fromString(post("services/cart/api/credit-types", "", payload, authorization.getAccessToken()), CreditResult[].class);
            if (graceResult.length == 0) continue;
            product.getGraceResults().addAll(Arrays.asList(graceResult));
            products.add(product);
            System.out.println(product.getId());
        }
    }

    private static List<MyObj.Goods> getGoods() {

        try {
            String json = new String(Files.readAllBytes(Paths.get("/home/evgeniy/IdeaProjects/groovy-maven/src/main/resources/goods.json")));
//            String json = "{\"hits\":{\"total\":{\"value\":10000,\"relation\":\"gte\"},\"hits\":[{\"_source\":{\"id\":6529993,\"name\":\"Ноутбук Dell Alienware 17 R4 (A771610S1NDW-760)\",\"manufacturerId\":107529,\"oldPrice\":0,\"imageUrl\":\"https://i1.foxtrot.com.ua/product/thumb/6415521.jpg\",\"barcode\":\"2064155210019\",\"status\":0,\"typhoonProps\":{\"markup_class\":\"B\"},\"manufacturer\":{\"id\":107529,\"name\":\"DELL\"},\"group\":{\"id\":58,\"name\":\"Ноутбуки\"},\"groups\":[{\"id\":58,\"name\":\"Ноутбуки\"},{\"id\":31904,\"name\":\"Ноутбуки, ПК\"},{\"id\":31992,\"name\":\"Ноутбуки и аксессуары\"}],\"actions_count\":0,\"defects_count\":0,\"srchString\":\"частота обновления экрана 60 гц разрешение дисплея 1920 x 1080 операционная система windows 10 серия процессора intel core i7 тип видеокарты дискретная ноутбук вес 3 кг и более конструкция классическая количество ядер 4 цвет крышки серебристый объем озу 16 гб диагональ дисплея 17.1\\\"-17.3\\\"  модель видеокарты geforce gtx1060 производитель видеокарты nvidia объем видеопамяти оптический привод отсутствует поколение intel core 7 поколение покрытие дисплея матовое тип матрицы ips модельный ряд dell alienware количество отделений аккумулятора цвет рабочей поверхности черный объем жесткого диска hdd 1 тб объем ssd диска 128 гб геймерские ноутбуки беспроводные коммуникации wi-fi bluetooth порты и разъемы vga (d-sub) mini-displayport thunderbolt expresscard 2 аудио разъема: для наушников и микрофона особенности подсветка клавиатуры линейка ноутбуков для геймеров ноутбук для геймеров ёмкость аккумулятора 80 вт-ч и больше тип накопителя hdd+ssd количество слотов оперативной памяти  ALIENWARE 17 R4(A771610S1NDW-760) DELL\",\"suggest\":[\"dell alienware 17 r4(a771610s1ndw-760)\"],\"props\":[{\"id\":98184402,\"id_Product\":6415521,\"id_Prop\":{\"id\":67816,\"name\":\"Частота обновления экрана\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":33551452,\"name\":\"60 Гц\",\"list_Index\":0,\"id_Prop\":{\"id\":67816,\"name\":\"Частота обновления экрана\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"60 Гц\",\"idx\":5,\"out_bmask\":3},{\"id\":94646029,\"id_Product\":6415521,\"id_Prop\":{\"id\":1330,\"name\":\"Вес\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":4,\"pVal\":\"4.42\",\"id_Measure_Unit\":127,\"idx\":42,\"out_bmask\":1},{\"id\":94646030,\"id_Product\":6415521,\"id_Prop\":{\"id\":10845,\"name\":\"Разрешение дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263839,\"name\":\"1920 x 1080\",\"list_Index\":0,\"id_Prop\":{\"id\":10845,\"name\":\"Разрешение дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"1920 x 1080\",\"idx\":3,\"out_bmask\":3},{\"id\":94646031,\"id_Product\":6415521,\"id_Prop\":{\"id\":10850,\"name\":\"Операционная система\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263724,\"name\":\"Windows 10\",\"list_Index\":0,\"id_Prop\":{\"id\":10850,\"name\":\"Операционная система\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Windows 10\",\"idx\":29,\"out_bmask\":3},{\"id\":94646033,\"id_Product\":6415521,\"id_Prop\":{\"id\":13268,\"name\":\"Тип видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263739,\"name\":\"дискретная\",\"list_Index\":0,\"id_Prop\":{\"id\":13268,\"name\":\"Тип видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"дискретная\",\"idx\":24,\"out_bmask\":3},{\"id\":94646034,\"id_Product\":6415521,\"id_Prop\":{\"id\":13694,\"name\":\"Габариты\",\"prop_type\":1,\"is_Multi_Select\":0},\"prop_Value_Str\":\"424 x 332 x 29.9\",\"pVal\":\"424 x 332 x 29.9\",\"id_Measure_Unit\":50,\"idx\":44,\"out_bmask\":1},{\"id\":94646035,\"id_Product\":6415521,\"id_Prop\":{\"id\":13978,\"name\":\"Тип памяти\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263881,\"name\":\"DDR4\",\"list_Index\":0,\"id_Prop\":{\"id\":13978,\"name\":\"Тип памяти\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"DDR4\",\"idx\":14,\"out_bmask\":1},{\"id\":94646036,\"id_Product\":6415521,\"id_Prop\":{\"id\":13979,\"name\":\"Скорость вращения\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263869,\"name\":\"7200\",\"list_Index\":0,\"id_Prop\":{\"id\":13979,\"name\":\"Скорость вращения\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"7200\",\"id_Measure_Unit\":151,\"idx\":20,\"out_bmask\":1},{\"id\":94646037,\"id_Product\":6415521,\"id_Prop\":{\"id\":13983,\"name\":\"Частота памяти\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263896,\"name\":\"2400\",\"list_Index\":0,\"id_Prop\":{\"id\":13983,\"name\":\"Частота памяти\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"2400\",\"id_Measure_Unit\":6,\"idx\":15,\"out_bmask\":1},{\"id\":94646038,\"id_Product\":6415521,\"id_Prop\":{\"id\":16387,\"name\":\"Тип\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":26093795,\"name\":\"ноутбук\",\"list_Index\":0,\"id_Prop\":{\"id\":16387,\"name\":\"Тип\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"ноутбук\",\"idx\":40,\"out_bmask\":3},{\"id\":94646040,\"id_Product\":6415521,\"id_Prop\":{\"id\":16807,\"name\":\"Конструкция\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263689,\"name\":\"Классическая\",\"list_Index\":0,\"id_Prop\":{\"id\":16807,\"name\":\"Конструкция\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Классическая\",\"idx\":41,\"out_bmask\":3},{\"id\":94646041,\"id_Product\":6415521,\"id_Prop\":{\"id\":16898,\"name\":\"Количество ядер\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264177,\"name\":\"4\",\"list_Index\":0,\"id_Prop\":{\"id\":16898,\"name\":\"Количество ядер\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"4\",\"idx\":12,\"out_bmask\":3},{\"id\":94646042,\"id_Product\":6415521,\"id_Prop\":{\"id\":29282,\"name\":\"Цвет крышки\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263918,\"name\":\"серебристый\",\"list_Index\":0,\"id_Prop\":{\"id\":29282,\"name\":\"Цвет крышки\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"серебристый\",\"idx\":45,\"out_bmask\":3},{\"id\":94646043,\"id_Product\":6415521,\"id_Prop\":{\"id\":30766,\"name\":\"Объем ОЗУ\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264194,\"name\":\"16 Гб\",\"list_Index\":0,\"id_Prop\":{\"id\":30766,\"name\":\"Объем ОЗУ\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"16 Гб\",\"idx\":13,\"out_bmask\":3},{\"id\":94646044,\"id_Product\":6415521,\"id_Prop\":{\"id\":42460,\"name\":\"Базовая частота процессора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264274,\"name\":\"2.8\",\"list_Index\":0,\"id_Prop\":{\"id\":42460,\"name\":\"Базовая частота процессора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"2.8\",\"id_Measure_Unit\":130,\"idx\":11,\"out_bmask\":1},{\"id\":94646045,\"id_Product\":6415521,\"id_Prop\":{\"id\":42461,\"name\":\"Диагональ дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264298,\"name\":\"17.3\",\"list_Index\":0,\"id_Prop\":{\"id\":42461,\"name\":\"Диагональ дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"17.3\",\"id_Measure_Unit\":146,\"idx\":1,\"out_bmask\":1},{\"id\":94646047,\"id_Product\":6415521,\"id_Prop\":{\"id\":42463,\"name\":\"Модель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":592410,\"name\":\"GeForce GTX1060\",\"list_Index\":0,\"id_Prop\":{\"id\":42463,\"name\":\"Модель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"GeForce GTX1060\",\"idx\":26,\"out_bmask\":3},{\"id\":94646048,\"id_Product\":6415521,\"id_Prop\":{\"id\":42469,\"name\":\"Производитель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264435,\"name\":\"NVIDIA\",\"list_Index\":0,\"id_Prop\":{\"id\":42469,\"name\":\"Производитель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"NVIDIA\",\"idx\":25,\"out_bmask\":3},{\"id\":94646049,\"id_Product\":6415521,\"id_Prop\":{\"id\":42471,\"name\":\"Объем видеопамяти\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":6,\"pVal\":\"6\",\"id_Measure_Unit\":59,\"idx\":27,\"out_bmask\":3},{\"id\":94646050,\"id_Product\":6415521,\"id_Prop\":{\"id\":42472,\"name\":\"Оптический привод\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264439,\"name\":\"отсутствует\",\"list_Index\":0,\"id_Prop\":{\"id\":42472,\"name\":\"Оптический привод\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"отсутствует\",\"idx\":28,\"out_bmask\":3},{\"id\":94646052,\"id_Product\":6415521,\"id_Prop\":{\"id\":42477,\"name\":\"Модель процессора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264629,\"name\":\"7700HQ\",\"list_Index\":0,\"id_Prop\":{\"id\":42477,\"name\":\"Модель процессора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"7700HQ\",\"idx\":10,\"out_bmask\":1},{\"id\":94646053,\"id_Product\":6415521,\"id_Prop\":{\"id\":42498,\"name\":\"Веб-камера\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":592702,\"name\":\"1080p\",\"list_Index\":0,\"id_Prop\":{\"id\":42498,\"name\":\"Веб-камера\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"1080p\",\"idx\":55,\"out_bmask\":1},{\"id\":94646054,\"id_Product\":6415521,\"id_Prop\":{\"id\":42551,\"name\":\"Стандарт Wi-Fi\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264692,\"name\":\"IEEE 802.11 ac\",\"list_Index\":0,\"id_Prop\":{\"id\":42551,\"name\":\"Стандарт Wi-Fi\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"IEEE 802.11 ac\",\"idx\":32,\"out_bmask\":1},{\"id\":94646055,\"id_Product\":6415521,\"id_Prop\":{\"id\":42554,\"name\":\"Сетевая карта\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264694,\"name\":\"LAN 10/100/1000 Мбит/с (Gigabit Ethernet)\",\"list_Index\":0,\"id_Prop\":{\"id\":42554,\"name\":\"Сетевая карта\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"LAN 10/100/1000 Мбит/с (Gigabit Ethernet)\",\"idx\":33,\"out_bmask\":1},{\"id\":94646056,\"id_Product\":6415521,\"id_Prop\":{\"id\":42555,\"name\":\"Конфигурация аудиосистемы\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264696,\"name\":\"2 динамика\",\"list_Index\":0,\"id_Prop\":{\"id\":42555,\"name\":\"Конфигурация аудиосистемы\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"2 динамика\",\"idx\":57,\"out_bmask\":1},{\"id\":94646057,\"id_Product\":6415521,\"id_Prop\":{\"id\":42561,\"name\":\"Покрытие дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264702,\"name\":\"матовое\",\"list_Index\":0,\"id_Prop\":{\"id\":42561,\"name\":\"Покрытие дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"матовое\",\"idx\":6,\"out_bmask\":3},{\"id\":94646058,\"id_Product\":6415521,\"id_Prop\":{\"id\":42588,\"name\":\"Тип матрицы\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264158,\"name\":\"IPS\",\"list_Index\":0,\"id_Prop\":{\"id\":42588,\"name\":\"Тип матрицы\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"IPS\",\"idx\":4,\"out_bmask\":3},{\"id\":94646059,\"id_Product\":6415521,\"id_Prop\":{\"id\":42649,\"name\":\"Модельный ряд\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":592735,\"name\":\"Dell Alienware\",\"list_Index\":0,\"id_Prop\":{\"id\":42649,\"name\":\"Модельный ряд\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Dell Alienware\",\"idx\":0,\"out_bmask\":3},{\"id\":94646060,\"id_Product\":6415521,\"id_Prop\":{\"id\":45669,\"name\":\"Количество портов USB 3.0\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":2,\"pVal\":\"2\",\"id_Measure_Unit\":33,\"idx\":36,\"out_bmask\":1},{\"id\":94646061,\"id_Product\":6415521,\"id_Prop\":{\"id\":45671,\"name\":\"Количество портов USB 3.1 (3.2) Type-C\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":1,\"pVal\":\"1\",\"id_Measure_Unit\":33,\"idx\":38,\"out_bmask\":1},{\"id\":94646062,\"id_Product\":6415521,\"id_Prop\":{\"id\":45673,\"name\":\"Тип аккумулятора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264720,\"name\":\"Li-Ion\",\"list_Index\":0,\"id_Prop\":{\"id\":45673,\"name\":\"Тип аккумулятора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Li-Ion\",\"idx\":48,\"out_bmask\":1},{\"id\":94646063,\"id_Product\":6415521,\"id_Prop\":{\"id\":45674,\"name\":\"Количество отделений аккумулятора\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":6,\"pVal\":\"6\",\"idx\":49,\"out_bmask\":3},{\"id\":94646064,\"id_Product\":6415521,\"id_Prop\":{\"id\":45762,\"name\":\"Цвет рабочей поверхности\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264745,\"name\":\"черный\",\"list_Index\":0,\"id_Prop\":{\"id\":45762,\"name\":\"Цвет рабочей поверхности\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"черный\",\"idx\":46,\"out_bmask\":3},{\"id\":94646065,\"id_Product\":6415521,\"id_Prop\":{\"id\":56510,\"name\":\"Объем жесткого диска HDD\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264748,\"name\":\"1 Тб\",\"list_Index\":0,\"id_Prop\":{\"id\":56510,\"name\":\"Объем жесткого диска HDD\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"1 Тб\",\"idx\":19,\"out_bmask\":3},{\"id\":94646066,\"id_Product\":6415521,\"id_Prop\":{\"id\":56513,\"name\":\"Объем SSD диска\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264750,\"name\":\"128 Гб\",\"list_Index\":0,\"id_Prop\":{\"id\":56513,\"name\":\"Объем SSD диска\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"128 Гб\",\"idx\":21,\"out_bmask\":3},{\"id\":94646067,\"id_Product\":6415521,\"id_Prop\":{\"id\":56609,\"name\":\"Серия процессора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264779,\"name\":\"Intel® Core™ i7 (7 поколение)\",\"list_Index\":0,\"id_Prop\":{\"id\":56609,\"name\":\"Серия процессора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Intel® Core™ i7 (7 поколение)\",\"idx\":8,\"out_bmask\":1},{\"id\":94646068,\"id_Product\":6415521,\"id_Prop\":{\"id\":56850,\"name\":\"Версия Windows\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264791,\"name\":\"Home\",\"list_Index\":0,\"id_Prop\":{\"id\":56850,\"name\":\"Версия Windows\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Home\",\"idx\":30,\"out_bmask\":1},{\"id\":100376348,\"id_Product\":6415521,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227108,\"name\":\"Wi-Fi\",\"list_Index\":0,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Wi-Fi\",\"idx\":31,\"out_bmask\":3},{\"id\":100376349,\"id_Product\":6415521,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227109,\"name\":\"Bluetooth\",\"list_Index\":1,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Bluetooth\",\"idx\":31,\"out_bmask\":3},{\"id\":100376350,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227113,\"name\":\"VGA (D-Sub)\",\"list_Index\":0,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"VGA (D-Sub)\",\"idx\":34,\"out_bmask\":3},{\"id\":100376351,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227117,\"name\":\"mini-DisplayPort\",\"list_Index\":5,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"mini-DisplayPort\",\"idx\":34,\"out_bmask\":3},{\"id\":100376352,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227123,\"name\":\"Thunderbolt\",\"list_Index\":6,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Thunderbolt\",\"idx\":34,\"out_bmask\":3},{\"id\":100376353,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227122,\"name\":\"ExpressCard\",\"list_Index\":8,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"ExpressCard\",\"idx\":34,\"out_bmask\":3},{\"id\":100376354,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227120,\"name\":\"2 аудио разъема: для наушников и микрофона\",\"list_Index\":11,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"2 аудио разъема: для наушников и микрофона\",\"idx\":34,\"out_bmask\":3},{\"id\":100376355,\"id_Product\":6415521,\"id_Prop\":{\"id\":42559,\"name\":\"Особенности\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227126,\"name\":\"подсветка клавиатуры\",\"list_Index\":1,\"id_Prop\":{\"id\":42559,\"name\":\"Особенности\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"подсветка клавиатуры\",\"idx\":54,\"out_bmask\":3},{\"id\":98382014,\"id_Product\":6415521,\"id_Prop\":{\"id\":67828,\"name\":\"Ёмкость аккумуляторной  батареи\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":99,\"pVal\":\"99\",\"id_Measure_Unit\":361,\"idx\":51,\"out_bmask\":1},{\"id\":98378339,\"id_Product\":6415521,\"id_Prop\":{\"id\":67830,\"name\":\"Тип накопителя\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":35231039,\"name\":\"HDD+SSD\",\"list_Index\":0,\"id_Prop\":{\"id\":67830,\"name\":\"Тип накопителя\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"HDD+SSD\",\"idx\":17,\"out_bmask\":3},{\"id\":98381383,\"id_Product\":6415521,\"id_Prop\":{\"id\":67826,\"name\":\"Количество слотов оперативной памяти\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":35230560,\"name\":\"2\",\"list_Index\":0,\"id_Prop\":{\"id\":67826,\"name\":\"Количество слотов оперативной памяти\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"2\",\"idx\":16,\"out_bmask\":3}],\"propsF\":[{\"id\":98184402,\"id_Product\":6415521,\"id_Prop\":{\"id\":67816,\"name\":\"Частота обновления экрана\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":33551452,\"name\":\"60 Гц\",\"list_Index\":0,\"id_Prop\":{\"id\":67816,\"name\":\"Частота обновления экрана\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"60 Гц\",\"idx\":5,\"out_bmask\":3},{\"id\":94646030,\"id_Product\":6415521,\"id_Prop\":{\"id\":10845,\"name\":\"Разрешение дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263839,\"name\":\"1920 x 1080\",\"list_Index\":0,\"id_Prop\":{\"id\":10845,\"name\":\"Разрешение дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"1920 x 1080\",\"idx\":3,\"out_bmask\":3},{\"id\":94646031,\"id_Product\":6415521,\"id_Prop\":{\"id\":10850,\"name\":\"Операционная система\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263724,\"name\":\"Windows 10\",\"list_Index\":0,\"id_Prop\":{\"id\":10850,\"name\":\"Операционная система\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Windows 10\",\"idx\":29,\"out_bmask\":3},{\"id\":94646032,\"id_Product\":6415521,\"id_Prop\":{\"id\":12091,\"name\":\"Серия процессора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263797,\"name\":\"Intel Core i7\",\"list_Index\":0,\"id_Prop\":{\"id\":12091,\"name\":\"Серия процессора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Intel Core i7\",\"idx\":7,\"out_bmask\":2},{\"id\":94646033,\"id_Product\":6415521,\"id_Prop\":{\"id\":13268,\"name\":\"Тип видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263739,\"name\":\"дискретная\",\"list_Index\":0,\"id_Prop\":{\"id\":13268,\"name\":\"Тип видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"дискретная\",\"idx\":24,\"out_bmask\":3},{\"id\":94646038,\"id_Product\":6415521,\"id_Prop\":{\"id\":16387,\"name\":\"Тип\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":26093795,\"name\":\"ноутбук\",\"list_Index\":0,\"id_Prop\":{\"id\":16387,\"name\":\"Тип\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"ноутбук\",\"idx\":40,\"out_bmask\":3},{\"id\":94646039,\"id_Product\":6415521,\"id_Prop\":{\"id\":16679,\"name\":\"Вес\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":591706,\"name\":\"3 кг и более\",\"list_Index\":0,\"id_Prop\":{\"id\":16679,\"name\":\"Вес\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"3 кг и более\",\"idx\":43,\"out_bmask\":2},{\"id\":94646040,\"id_Product\":6415521,\"id_Prop\":{\"id\":16807,\"name\":\"Конструкция\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263689,\"name\":\"Классическая\",\"list_Index\":0,\"id_Prop\":{\"id\":16807,\"name\":\"Конструкция\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Классическая\",\"idx\":41,\"out_bmask\":3},{\"id\":94646041,\"id_Product\":6415521,\"id_Prop\":{\"id\":16898,\"name\":\"Количество ядер\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264177,\"name\":\"4\",\"list_Index\":0,\"id_Prop\":{\"id\":16898,\"name\":\"Количество ядер\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"4\",\"idx\":12,\"out_bmask\":3},{\"id\":94646042,\"id_Product\":6415521,\"id_Prop\":{\"id\":29282,\"name\":\"Цвет крышки\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":263918,\"name\":\"серебристый\",\"list_Index\":0,\"id_Prop\":{\"id\":29282,\"name\":\"Цвет крышки\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"серебристый\",\"idx\":45,\"out_bmask\":3},{\"id\":94646043,\"id_Product\":6415521,\"id_Prop\":{\"id\":30766,\"name\":\"Объем ОЗУ\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264194,\"name\":\"16 Гб\",\"list_Index\":0,\"id_Prop\":{\"id\":30766,\"name\":\"Объем ОЗУ\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"16 Гб\",\"idx\":13,\"out_bmask\":3},{\"id\":94646046,\"id_Product\":6415521,\"id_Prop\":{\"id\":42462,\"name\":\"Диагональ дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264310,\"name\":\"17.1\\\"-17.3\\\" \",\"list_Index\":0,\"id_Prop\":{\"id\":42462,\"name\":\"Диагональ дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"17.1\\\"-17.3\\\" \",\"idx\":2,\"out_bmask\":2},{\"id\":94646047,\"id_Product\":6415521,\"id_Prop\":{\"id\":42463,\"name\":\"Модель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":592410,\"name\":\"GeForce GTX1060\",\"list_Index\":0,\"id_Prop\":{\"id\":42463,\"name\":\"Модель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"GeForce GTX1060\",\"idx\":26,\"out_bmask\":3},{\"id\":94646048,\"id_Product\":6415521,\"id_Prop\":{\"id\":42469,\"name\":\"Производитель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264435,\"name\":\"NVIDIA\",\"list_Index\":0,\"id_Prop\":{\"id\":42469,\"name\":\"Производитель видеокарты\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"NVIDIA\",\"idx\":25,\"out_bmask\":3},{\"id\":94646049,\"id_Product\":6415521,\"id_Prop\":{\"id\":42471,\"name\":\"Объем видеопамяти\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":6,\"pVal\":\"6\",\"id_Measure_Unit\":59,\"idx\":27,\"out_bmask\":3},{\"id\":94646050,\"id_Product\":6415521,\"id_Prop\":{\"id\":42472,\"name\":\"Оптический привод\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264439,\"name\":\"отсутствует\",\"list_Index\":0,\"id_Prop\":{\"id\":42472,\"name\":\"Оптический привод\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"отсутствует\",\"idx\":28,\"out_bmask\":3},{\"id\":94646051,\"id_Product\":6415521,\"id_Prop\":{\"id\":42476,\"name\":\"Поколение Intel Core\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264525,\"name\":\"7 поколение\",\"list_Index\":0,\"id_Prop\":{\"id\":42476,\"name\":\"Поколение Intel Core\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"7 поколение\",\"idx\":9,\"out_bmask\":2},{\"id\":94646057,\"id_Product\":6415521,\"id_Prop\":{\"id\":42561,\"name\":\"Покрытие дисплея\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264702,\"name\":\"матовое\",\"list_Index\":0,\"id_Prop\":{\"id\":42561,\"name\":\"Покрытие дисплея\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"матовое\",\"idx\":6,\"out_bmask\":3},{\"id\":94646058,\"id_Product\":6415521,\"id_Prop\":{\"id\":42588,\"name\":\"Тип матрицы\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264158,\"name\":\"IPS\",\"list_Index\":0,\"id_Prop\":{\"id\":42588,\"name\":\"Тип матрицы\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"IPS\",\"idx\":4,\"out_bmask\":3},{\"id\":94646059,\"id_Product\":6415521,\"id_Prop\":{\"id\":42649,\"name\":\"Модельный ряд\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":592735,\"name\":\"Dell Alienware\",\"list_Index\":0,\"id_Prop\":{\"id\":42649,\"name\":\"Модельный ряд\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"Dell Alienware\",\"idx\":0,\"out_bmask\":3},{\"id\":94646063,\"id_Product\":6415521,\"id_Prop\":{\"id\":45674,\"name\":\"Количество отделений аккумулятора\",\"prop_type\":2,\"is_Multi_Select\":0},\"prop_Value_Number\":6,\"pVal\":\"6\",\"idx\":49,\"out_bmask\":3},{\"id\":94646064,\"id_Product\":6415521,\"id_Prop\":{\"id\":45762,\"name\":\"Цвет рабочей поверхности\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264745,\"name\":\"черный\",\"list_Index\":0,\"id_Prop\":{\"id\":45762,\"name\":\"Цвет рабочей поверхности\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"черный\",\"idx\":46,\"out_bmask\":3},{\"id\":94646065,\"id_Product\":6415521,\"id_Prop\":{\"id\":56510,\"name\":\"Объем жесткого диска HDD\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264748,\"name\":\"1 Тб\",\"list_Index\":0,\"id_Prop\":{\"id\":56510,\"name\":\"Объем жесткого диска HDD\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"1 Тб\",\"idx\":19,\"out_bmask\":3},{\"id\":94646066,\"id_Product\":6415521,\"id_Prop\":{\"id\":56513,\"name\":\"Объем SSD диска\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":264750,\"name\":\"128 Гб\",\"list_Index\":0,\"id_Prop\":{\"id\":56513,\"name\":\"Объем SSD диска\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"128 Гб\",\"idx\":21,\"out_bmask\":3},{\"id\":100376347,\"id_Product\":6415521,\"id_Prop\":{\"id\":16810,\"name\":\"Класс\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227101,\"name\":\"Геймерские ноутбуки\",\"list_Index\":2,\"id_Prop\":{\"id\":16810,\"name\":\"Класс\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Геймерские ноутбуки\",\"idx\":56,\"out_bmask\":2},{\"id\":100376348,\"id_Product\":6415521,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227108,\"name\":\"Wi-Fi\",\"list_Index\":0,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Wi-Fi\",\"idx\":31,\"out_bmask\":3},{\"id\":100376349,\"id_Product\":6415521,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227109,\"name\":\"Bluetooth\",\"list_Index\":1,\"id_Prop\":{\"id\":42497,\"name\":\"Беспроводные коммуникации\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Bluetooth\",\"idx\":31,\"out_bmask\":3},{\"id\":100376350,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227113,\"name\":\"VGA (D-Sub)\",\"list_Index\":0,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"VGA (D-Sub)\",\"idx\":34,\"out_bmask\":3},{\"id\":100376351,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227117,\"name\":\"mini-DisplayPort\",\"list_Index\":5,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"mini-DisplayPort\",\"idx\":34,\"out_bmask\":3},{\"id\":100376352,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227123,\"name\":\"Thunderbolt\",\"list_Index\":6,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"Thunderbolt\",\"idx\":34,\"out_bmask\":3},{\"id\":100376353,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227122,\"name\":\"ExpressCard\",\"list_Index\":8,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"ExpressCard\",\"idx\":34,\"out_bmask\":3},{\"id\":100376354,\"id_Product\":6415521,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227120,\"name\":\"2 аудио разъема: для наушников и микрофона\",\"list_Index\":11,\"id_Prop\":{\"id\":42499,\"name\":\"Порты и разъемы\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"2 аудио разъема: для наушников и микрофона\",\"idx\":34,\"out_bmask\":3},{\"id\":100376355,\"id_Product\":6415521,\"id_Prop\":{\"id\":42559,\"name\":\"Особенности\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":227126,\"name\":\"подсветка клавиатуры\",\"list_Index\":1,\"id_Prop\":{\"id\":42559,\"name\":\"Особенности\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"подсветка клавиатуры\",\"idx\":54,\"out_bmask\":3},{\"id\":100376356,\"id_Product\":6415521,\"id_Prop\":{\"id\":67529,\"name\":\"Линейка ноутбуков для геймеров\",\"prop_type\":4,\"is_Multi_Select\":1},\"prop_Value_Enum\":{\"id\":20250599,\"name\":\"ноутбук для геймеров\",\"list_Index\":0,\"id_Prop\":{\"id\":67529,\"name\":\"Линейка ноутбуков для геймеров\",\"prop_type\":4,\"is_Multi_Select\":1}},\"pVal\":\"ноутбук для геймеров\",\"idx\":59,\"out_bmask\":2},{\"id\":98382703,\"id_Product\":6415521,\"id_Prop\":{\"id\":67829,\"name\":\"Ёмкость аккумулятора\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":35440087,\"name\":\"80 Вт-ч и больше\",\"list_Index\":0,\"id_Prop\":{\"id\":67829,\"name\":\"Ёмкость аккумулятора\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"80 Вт-ч и больше\",\"idx\":52,\"out_bmask\":2},{\"id\":98378339,\"id_Product\":6415521,\"id_Prop\":{\"id\":67830,\"name\":\"Тип накопителя\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":35231039,\"name\":\"HDD+SSD\",\"list_Index\":0,\"id_Prop\":{\"id\":67830,\"name\":\"Тип накопителя\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"HDD+SSD\",\"idx\":17,\"out_bmask\":3},{\"id\":98381383,\"id_Product\":6415521,\"id_Prop\":{\"id\":67826,\"name\":\"Количество слотов оперативной памяти\",\"prop_type\":4,\"is_Multi_Select\":0},\"prop_Value_Enum\":{\"id\":35230560,\"name\":\"2\",\"list_Index\":0,\"id_Prop\":{\"id\":67826,\"name\":\"Количество слотов оперативной памяти\",\"prop_type\":4,\"is_Multi_Select\":0}},\"pVal\":\"2\",\"idx\":16,\"out_bmask\":3}],\"rests\":[],\"defects\":[],\"url_images\":[{\"id\":967436,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_0.jpg\"},{\"id\":967443,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_1.jpg\"},{\"id\":967444,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_2.jpg\"},{\"id\":967445,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_3.jpg\"},{\"id\":967446,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_4.jpg\"},{\"id\":967447,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_5.jpg\"},{\"id\":967448,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_6.jpg\"},{\"id\":967449,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_7.jpg\"},{\"id\":967450,\"name\":\"https://i1.foxtrot.com.ua/product/MediumImages/6415521_8.jpg\"}],\"all_actions\":[],\"web_actions\":[],\"web_attr\":{}}}]}}";
            MyObj goods = fromString(json, MyObj.class);
            if (goods == null) return List.of();
            return goods.getHits().getHits1s().stream()
                .map(it -> it.getSource())
                .collect(Collectors.toList());

        } catch (Exception e) {
            e.printStackTrace();
        }

        return List.of();
    }

    private static <T> T fromString(String json, Class<T> tClass) {
        ObjectMapper objectMapper = new ObjectMapper();
        try {
            return objectMapper.readValue(json, tClass);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    private static String get(String path, String query, String key) {
        RestTemplate restTemplate = new RestTemplate();

        URI url = UriComponentsBuilder.fromUriString(HOST)
            .path(path)
            .query(query)
            .build().toUri();
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.TEXT_HTML);
        if (StringUtils.isNotBlank(key)){
            headers.set("Authorization", String.format("Bearer %s", key));
        }
        ResponseEntity<String> response = restTemplate.exchange(url, HttpMethod.GET, new HttpEntity<>(headers), String.class);
        if (!response.getStatusCode().is2xxSuccessful()) {
            throw new RestClientException("Status code not 2xx!");
        }
        return response.getBody();
    }

    private static String post(String path, String query, Map payload, String key) {
        RestTemplate restTemplate = new RestTemplate();

        URI url = UriComponentsBuilder.fromUriString(HOST)
            .path(path)
            .query(query)
            .build().toUri();

        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        if (StringUtils.isNotBlank(key)){
            headers.set("Authorization", String.format("Bearer %s", key));
        }
        ResponseEntity<String> response = restTemplate.exchange(url, HttpMethod.POST, new HttpEntity<>(payload, headers), String.class);
        if (!response.getStatusCode().is2xxSuccessful()) {
            throw new RestClientException("Status code not 2xx!");
        }
        return response.getBody();
    }
}
